(()=>{"use strict";class e{constructor(e){this.name=e}}class t{constructor(e,t,i){void 0===i?(void 0!==t&&(this.date=t),void 0!==e&&(this.choices=e)):this.fromJSON(i)}getDate(){return`${new Date(this.date).toLocaleDateString()}, ${new Date(this.date).toLocaleTimeString()}`}getChoices(){return this.choices}decide(){let e=Math.floor(Math.random()*this.choices.length);return this.choice=this.choices[e],this.choice}toJSON(){let e=JSON.stringify({choice:this.choice,choices:this.choices,date:this.date});return console.log(e),e}fromJSON(e){let t=JSON.parse(e);this.choice=t.choice,this.choices=t.choices,this.date=t.date}}class i{static CoinFlip(){let i=[];return i.push(new e("Heads")),i.push(new e("Tails")),new t(i,Date.now())}static RNG(i){let s=[];for(let t=0;t<i;t++)s.push(new e((t+1).toString()));return new t(s,Date.now())}}class s{constructor(){this.choices=[],this.decisions=[],this.idCounter=0}static start(){s.app=new s,this.load()}static addChoice(t){t.trim().length>0&&(s.app.choices.push(new e(t.trim())),this.clearInput(document.getElementById("choiceInput")),this.addChoiceToPage(t.trim()))}static removeChoice(e){let t=document.getElementById(`choice${e}`),i=t.innerText.substring(t.innerText.indexOf("\n")),n=s.app.choices.findIndex((e=>e.name===i));s.app.choices.splice(n,1),t.remove()}static clearChoices(){s.app.choices=[],s.app.idCounter=0,document.getElementById("choices").innerHTML=""}static decide(){s.app.choices.length>0&&this.makeDecision(new t(s.app.choices,Date.now()))}static redecide(){let e=s.app.decision.decide();this.save(),this.hideElement(document.getElementById("decisionOptions")),this.think(e.name,3)}static getStarted(){this.clearChoices(),this.hideElement(document.getElementById("welcomeScreen")),this.hideElement(document.getElementById("decisionScreen")),this.showElement(document.getElementById("choiceScreen"))}static viewHistory(){}static flipCoin(){this.getStarted(),this.makeDecision(i.CoinFlip())}static rng(e){this.getStarted(),this.makeDecision(i.RNG(e))}static customRNG(){this.rng(0)}static showElement(e){e.classList.contains("hidden")&&e.classList.remove("hidden")}static hideElement(e){!1===e.classList.contains("hidden")&&e.classList.add("hidden")}static onTextInput(e){if("Enter"===e.key){let t=e.target;this.addChoice(t.value)}}static addChoiceFromInput(){let e=document.getElementById("choiceInput");this.addChoice(e.value),e.focus()}static clearInput(e){e.value=""}static addChoiceToPage(e){let t=document.getElementById("choices"),i=t.innerHTML;i+=`<div id="choice${s.app.idCounter}" class="flex"><div class="button buttonSmall" onclick="App.removeChoice(${s.app.idCounter})">-</div>${e}</div>`,t.innerHTML=i,s.app.idCounter++}static makeDecision(e){s.app.decision=e;let t=s.app.decision.decide();document.getElementById("decision").innerText=t.name,s.app.decisions.push(s.app.decision),this.save(),this.hideElement(document.getElementById("choiceScreen")),this.hideElement(document.getElementById("decisionOptions")),this.showElement(document.getElementById("decisionScreen")),this.think(t.name,10)}static think(e,t){let i=document.getElementById("decision"),n=s.app.decision.getChoices();if(n.length>1){for(let e=0;e<t;e++)setTimeout((()=>{let e=Math.floor(Math.random()*n.length),t=n[e].name;for(;t===i.innerText;)e=Math.floor(Math.random()*n.length),t=n[e].name;i.innerText=t}),100*e);setTimeout((()=>{this.showElement(document.getElementById("decisionOptions")),i.innerText=e}),100*t)}else this.showElement(document.getElementById("decisionOptions")),i.innerText=e}static load(){try{localStorage.getItem(this.storageKey)}catch(e){}}static save(){try{let e=[];for(let t=0;t<s.app.decisions.length;t++)e.push(s.app.decisions[t].toJSON());console.log(JSON.stringify(e))}catch(e){}}}s.storageKey="dandon.decider",s.storageCount=10,s.start(),window.App=s})();